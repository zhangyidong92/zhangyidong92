# addEventListener

`addEventListener` 是 JavaScript 中用于向指定元素添加事件监听器的方法。这个方法允许你为元素上的特定事件（如点击、鼠标移动、键盘事件等）指定一个处理函数。addEventListener 方法接受至少两个参数，有时还可以接受第三个参数。以下是这些参数的详细说明：

## 事件类型（type）
类型：字符串

描述：指定要监听的事件类型。事件类型（如 "click", "mouseover", "keydown" 等）是一个字符串，表示要监听的事件的名称。

## 事件处理函数（listener）
类型：函数

描述：当事件发生时，会调用这个函数。这个函数会接收到一个事件对象作为参数，该对象包含了事件的详细信息，如触发事件的元素、事件类型、事件发生的时间等。

## 捕获/冒泡阶段（options/useCapture）（可选）
类型：布尔值（在旧版浏览器中）或EventListenerOptions对象（现代浏览器）

描述：这个参数是可选的，用于指定事件处理函数是在捕获阶段（capture phase）还是冒泡阶段（bubbling phase）被调用。

- 布尔值：当传递一个布尔值时，true 表示在捕获阶段调用事件处理程序，false 表示在冒泡阶段调用（默认值）。

- EventListenerOptions对象：现代浏览器支持传递一个对象作为第三个参数，该对象可以包含capture（布尔值，同上）、once（布尔值，表示监听器在调用一次后立即被移除）和passive（布尔值，表示监听器永远不会调用preventDefault()）等属性。

## 示例

```js
element.addEventListener('click', function(event) {  
    console.log('Clicked!', event);  
}, false); // 在冒泡阶段调用

element.addEventListener('click', function(event) {  
    console.log('Clicked!', event);  
}, {  
    capture: false, // 在冒泡阶段调用  
    once: true, // 监听器只调用一次  
    passive: false // 监听器可以调用 preventDefault()  
});
```

::: warning
- 同一个元素上可以为同一事件类型添加多个监听器。
- 监听器函数内部的this关键字指向触发事件的元素。
- 默认情况下，事件处理函数在冒泡阶段被调用，但你可以通过第三个参数来改变这一点。
- 使用removeEventListener方法可以移除之前通过addEventListener添加的事件监听器，但需要注意引用相等性（即移除时提供的函数必须与添加时提供的函数完全相同）。
:::

## 捕获阶段和冒泡阶段区别

### 捕获阶段（Capture Phase）

事件传播方向：在捕获阶段，事件从不太具体的节点（如 document 或 window）开始传播，通过各个父节点向下传播至目标元素（即触发事件的元素）。这是一个从外向内的过程。

监听器触发时机：如果为元素注册了捕获阶段的事件监听器（通过 addEventListener 方法的第三个参数设置为 true），那么这些监听器会在事件到达目标元素之前被触发。

目的：捕获阶段的目的是为了在事件到达目标元素之前，对事件进行预处理或拦截。

### 冒泡阶段（Bubbling Phase）
事件传播方向：在冒泡阶段，事件从目标元素开始，向上传播至其父节点，然后逐级向上，直到最外层的节点（如 document 或 window）。这是一个从内向外的过程。

监听器触发时机：如果为元素注册了冒泡阶段的事件监听器（通过 addEventListener 方法的第三个参数设置为 false 或省略该参数），那么这些监听器会在事件到达目标元素并处理完毕后被触发。

目的：冒泡阶段的目的是为了在事件传播过程中，对事件进行后续处理或响应。这是最常用的处理方式，因为它更符合人类的直觉，也更容易理解和使用。

### 总结
传播方向：捕获阶段从外向内传播，而冒泡阶段从内向外传播。

监听器触发时机：捕获阶段的监听器在事件到达目标元素之前触发，而冒泡阶段的监听器在事件到达目标元素并处理完毕后触发。

目的和用途：捕获阶段主要用于事件预处理或拦截，而冒泡阶段则用于事件的后续处理或响应。

在实际开发中，根据具体需求选择使用捕获阶段还是冒泡阶段，或者同时使用两者来实现更复杂的事件处理逻辑。同时，还可以使用 event.stopPropagation() 方法来阻止事件的进一步传播，以及 event.preventDefault() 方法来阻止事件的默认行为。